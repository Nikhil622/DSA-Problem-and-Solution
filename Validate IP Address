class Solution {
    public:
        int isValid(string s) {  // Iterative Soln
            if((15<s.size()) || (s[0]=='.') || (s[s.size()-1]=='.'))
              return 0;
            int total=0;
            for(int i=0;i<s.size();++i)
              {  if(s[i]=='.')
                  ++total;
                 else if(s[i]<'0' || '9'<s[i])
                  return 0;
              }
            if(total!=3)
              return 0;
            int prev=-1;
            for(int i=0;i<s.size();++i)
            { if(s[i]=='.')
                {  if((i-prev-1)>3 || (i-prev)==1) // i-prev: dots are continious
                     return 0;
                  if((i-prev-1)>1 && s[prev+1]=='0')
                      return 0;
                    string x="";
                    for(int j=prev+1;j<i;++j)
                      x+=s[j];
                    if(stoi(x)>255) // x.size()==0 : dots are continious
                      return 0;
                    prev=i;
                }
            }
            if((3<s.size()-prev-1) || ((s.size()-prev-1)>1 && s[prev+1]=='0'))
              return 0;
            string str="";
            for(int i=prev+1;i<s.size();++i)
              str+=s[i];
            if(stoi(str)>255)
              return 0;
            return 1;
        }
 };
